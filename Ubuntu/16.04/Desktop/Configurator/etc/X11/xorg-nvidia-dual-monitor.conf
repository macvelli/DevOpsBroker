#
# xorg-nvidia-dual-monitor.conf - DevOpsBroker sample /etc/X11/xorg.conf file
#
# Copyright (C) 2018 Edward Smith <edwardsmith@devopsbroker.org>
#
# This program is free software: you can redistribute it and/or modify it under
# the terms of the GNU General Public License as published by the Free Software
# Foundation, either version 3 of the License, or (at your option) any later
# version.
#
# This program is distributed in the hope that it will be useful, but WITHOUT
# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
# FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more
# details.
#
# You should have received a copy of the GNU General Public License along with
# this program.  If not, see <http://www.gnu.org/licenses/>.
#
# -----------------------------------------------------------------------------
# Developed on Ubuntu 16.04.5 LTS running kernel.osrelease = 4.15.0-34
#
# This sample /etc/X11/xorg.conf file is for a single NVIDIA graphics card
# driving two monitors.
#
# Dual Monitor Setup:
#
# 1) Delete existing /etc/X11/xorg.conf to reset defaults. Logout/Login
#
# 2) Execute nvidia-settings
#    a) X Server Display Configuration
#    b) Configure primary display --> X screen 0, Resolution: <auto|specific>, Position: Absolute
#    c) Configure secondary display --> X screen 0, Resolution: <auto|specific>, Position: Right of/Left of/Above/Below primary monitor
#    d) Save to X Configuration File
#    e) Logout/Login
#
# 3) Modify the new /etc/X11/xorg.conf Screen section to include the additional
#    settings found below.
#       o Also include the Extensions section to enable the Composite extension
#       o Logout/Login one more time
#
# nvidia-settings: X configuration file generated by nvidia-settings
# nvidia-settings:  version 361.42  (buildd@lgw01-18)  Tue Apr  5 14:33:28 UTC 2016
# -----------------------------------------------------------------------------
#

Section "ServerLayout"
	Identifier     "DualMonitor"
	Screen      0  "Screen0" 0 0
	InputDevice    "Keyboard0" "CoreKeyboard"
	InputDevice    "Mouse0" "CorePointer"
	Option         "Xinerama" "0"
EndSection

Section "Files"
EndSection

Section "Module"
	Load           "dbe"
	Load           "extmod"
	Load           "type1"
	Load           "freetype"
	Load           "glx"
EndSection

Section "InputDevice"
	Identifier     "Mouse0"
	Driver         "mouse"
	Option         "Protocol" "auto"
	Option         "Device" "/dev/psaux"
	Option         "Emulate3Buttons" "no"
	Option         "ZAxisMapping" "4 5"
EndSection

Section "InputDevice"
	Identifier     "Keyboard0"
	Driver         "kbd"
EndSection

Section "Monitor"
	# HorizSync source: edid, VertRefresh source: edid
	Identifier     "Monitor0"
	VendorName     "LG Electronics"
	ModelName      "LG 34CB88-P 34-inch Ultrawide"
	HorizSync       30.0 - 90.0
	VertRefresh     56.0 - 61.0
	Option         "DPMS"
EndSection

Section "Device"
	Identifier     "Device0"
	Driver         "nvidia"
	VendorName     "NVIDIA Corporation"
	BoardName      "GeForce GTX 1060 3GB"
EndSection

Section "Screen"
	Identifier     "Screen0"
	Device         "Device0"
	Monitor        "Monitor0"
	DefaultDepth    24
	Option         "Accel" "On"
	Option         "AddARGBGLXVisuals" "True"
	Option         "AllowGLXWithComposite" "True"
	Option         "AllowSHMPixmaps" "False"
	Option         "ColorSpace" "RGB"
	Option         "ColorRange" "Full"
	Option         "DamageEvents" "On"
	Option         "ForceCompositionPipeline" "On"
	Option         "GLShaderDiskCache" "On"
	Option         "Interactive" "Off"
	Option         "MultisampleCompatibility" "True"
	Option         "NoFlip" "False"
	Option         "RenderAccel" "True"
	Option         "ThermalConfigurationCheck" "On"
	Option         "TripleBuffer" "On"
	Option         "Stereo" "0"
	Option         "nvidiaXineramaInfoOrder" "DFP-1"
	Option         "metamodes" "HDMI-0: 3440x1440_60 +0+0, HDMI-1: 1920x1080_60 +3440+0"
	Option         "SLI" "Off"
	Option         "MultiGPU" "Off"
	Option         "BaseMosaic" "off"
	SubSection     "Display"
		Depth       24
	EndSubSection
EndSection

Section "Extensions"
	Option         "Composite" "Enable"
EndSection

#
# xorg.conf - DevOpsBroker sample /etc/X11/xorg.conf configuration file
#
# Copyright (C) 2018 Edward Smith <edwardsmith@devopsbroker.org>
#
# This program is free software: you can redistribute it and/or modify it under
# the terms of the GNU General Public License as published by the Free Software
# Foundation, either version 3 of the License, or (at your option) any later
# version.
#
# This program is distributed in the hope that it will be useful, but WITHOUT
# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
# FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more
# details.
#
# You should have received a copy of the GNU General Public License along with
# this program.  If not, see <http://www.gnu.org/licenses/>.
#
# -----------------------------------------------------------------------------
# Developed on Ubuntu 16.04.4 LTS running kernel.osrelease = 4.13.0-43
#
# nvidia-xconfig: X configuration file generated by nvidia-xconfig
# nvidia-xconfig: Version 384.130 Wed Mar 21 04:09:03 PDT 2018
#
# o This sample xorg.conf file was originally generated with the following
#   command and then modified from there:
#
# nvidia-xconfig --allow-glx-with-composite --composite --damage-events
#		 --disable-glx-root-clipping --flip --render-accel
#		 --thermal-configuration-check --use-edid --color-space=RGB
#		 --color-range=Full --force-composition-pipeline=yes
#
# Useful Linux Command-Line Utilities
# ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
# o Modelines generated with gtf:
# gtf 3440 1440 60
#
# o List loaded Linux Kernel modules
# lsmod
#
# o View existing configured display modes
# xrandr
#
# o View information about all recognized NVIDIA GPUs in the system
# nvidia-xconfig --query-gpu-info
#
# o Verify direct rendering is enabled (GPU Performance)
# glxinfo | grep -F "direct rendering"
#
# o Configure the NVIDIA graphics driver
# nvidia-settings
#
# TODO: Cannot get the computed DPI found in /var/log/Xorg.0.log synched up
#	with the value reported from:
#
# xrdb -query | grep dpi
# -----------------------------------------------------------------------------
#

Section "ServerLayout"
    Identifier     "UbuntuDesktop"
    Screen      0  "Screen0" 0 0
    InputDevice    "USB Keyboard" "CoreKeyboard"
    InputDevice    "USB Mouse" "CorePointer"
EndSection

Section "Files"
EndSection

Section "InputDevice"
    Identifier     "USB Mouse"
    Driver         "mouse"
    Option         "Protocol" "USB"
    Option         "Device" "/dev/input/mice"
    Option         "Buttons" "7"
    Option         "ButtonsMapping" "1 2 3 6 7"
    Option         "Resolution" "1500"
    Option         "SampleRate" "500"
    Option         "ZAxisMapping" "4 5"
EndSection

Section "InputDevice"
    Identifier     "USB Keyboard"
    Driver         "kbd"
    Option         "XkbLayout" "us"
EndSection

Section "Module"
    Load           "glx"
EndSection

Section "Monitor"
    Identifier     "Monitor0"
    VendorName     "LG Electronics"
    ModelName      "LG 34CB88-P 34-inch Ultrawide"
    HorizSync       30.0 - 90.0
    VertRefresh     56.0 - 61.0
    DisplaySize     800 335	# In millimeters

    # 3440x1440 @ 60.00 Hz (GTF) hsync: 89.40 kHz; pclk: 419.11 MHz
    Modeline       "3440x1440_60"  419.11  3440 3688 4064 4688  1440 1441 1444 1490  -HSync +Vsync

    # 2560x1080 @ 60.00 Hz (GTF) hsync: 67.08 kHz; pclk: 230.76 MHz
    Modeline       "2560x1080_60"  230.76  2560 2728 3000 3440  1080 1081 1084 1118  -HSync +Vsync

    Option         "DPMS" "True"	# Display Power Management Signaling
EndSection

Section "Device"
    Identifier     "Device0"
    Driver         "nvidia"
    BoardName      "GeForce GT 1030"
    BusID          "PCI:7:0:0"
    VendorName     "NVIDIA Corporation"
    Option         "AllowSHMPixmaps" "False"
EndSection

Section "Screen"
    Identifier     "Screen0"
    Device         "Device0"
    Monitor        "Monitor0"
    DefaultDepth    24
    Option         "RenderAccel" "True"
    Option         "AllowGLXWithComposite" "True"
    Option         "NoFlip" "False"
    Option         "UseEDID" "True"
    Option         "UseEDIDDpi" "False"
    Option         "DisableGLXRootClipping" "True"
    Option         "DamageEvents" "True"
    Option         "ThermalConfigurationCheck" "True"
    Option         "ColorSpace" "RGB"
    Option         "ColorRange" "Full"
    Option         "ForceCompositionPipeline" "yes"
    SubSection     "Display"
        Depth       24
        Modes      "3440x1440_60" "2560x1080_60"
    EndSubSection
EndSection

Section "Extensions"
    Option         "Composite" "Enable"
EndSection

